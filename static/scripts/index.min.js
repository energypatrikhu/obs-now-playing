(async()=>{const t=t=>document.querySelector(t),e=t("#nowPlaying"),o=t("#artist"),n=t("#track"),s=t("#thumbnail");if(!(e&&o&&n&&s))return;const a=new io;let i,r,u;const c=[];let l={};function m(){e?.setAttribute("data-open","true"),i=setTimeout((()=>{e?.classList.add("enablePulse"),r=setTimeout((()=>{e?.classList.remove("enablePulse")}),24e3)}),3200),u=setTimeout((()=>{e?.setAttribute("data-open","false")}),27200)}a.on("nowPlaying",(t=>{if(l!=t){clearTimeout(i),clearTimeout(r),clearTimeout(u);for(const t of c)clearTimeout(t);o.textContent=t.artist,n.textContent=t.track,s.src=t.thumbnail,l=t;for(const e of t.reAlerts){const t=new Date(e)-new Date;c.push(setTimeout(m,t))}}}))})();